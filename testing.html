<!--
    利用VueJs組件功能測試非同步更新DOM資料,
    此處利用官方範例修改而成。
    包含創建組件(行:26-49)、創建Vue實例(行:50-56)、Vue子組件的函式呼叫方式(行:59)。
-->
<!DOCTYPE html>
<html>
  <title>Web Page Design</title>
  <head>
  </head>
  <body>
    <!-- root element, id set 'app' -->
    <div id = "app">
      <!-- Parent's contnet -->
      Parent Msg : {{text}}
      <br>
      <!-- Click button to call child function-->
      <button>Change</button>
      <br>
      <!-- Declare child component and set v-ref tag -->
      Child Msg : <child v-ref:child></child>
    </div>
    <script src="https://cdn.jsdelivr.net/vue/1.0.26/vue.min.js"></script>
  </body>
  <script>
    /* 
       Declare component for child.
       Include third part: 
       1. element's tag.
       2. data's callback function.
       3. methods's function.
    */
    Vue.component('child', {
      template: '<span>{{msg}}</span>',
      data: function () {
        return {
          msg: 'not updated'
        }
      },
      methods: {
        updateMessage: function () {
          this.msg = 'updated';
          console.log(this.$el.textContent);// => 'not updated'
          this.$nextTick(function () {
            console.log(this.$el.textContent);// => 'updated'
          })
        }
      }
    });//End of Vuecomponent().
    //Declare parent Vue instance.
    var parent = new Vue({
      el: '#app',//element id
      data: {
        text: '123'
      }
    });//End of Vue().
    //According to ref index call child's function. 
    parent.$refs.child.updateMessage();
  </script>
</html>